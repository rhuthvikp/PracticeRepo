/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Java library project to get you started.
 * For more details take a look at the 'Building Java & JVM projects' chapter in the Gradle
 * User Manual available at https://docs.gradle.org/7.4.2/userguide/building_java_projects.html
 */

plugins {
    id 'java'
    id 'io.qameta.allure' version '2.8.1'

}
group 'mckesson'
version '1.0-SNAPSHOT'

repositories {
    mavenCentral()
}

ext {
    allureVersion = '2.19.0'
    seleniumVersion = '4.4.0'
    testNGVersion = '7.6.1'
}

/*allure {
    version = allureVersion
    allureJavaVersion = allureVersion
    aspectjVersion = '2.19.0'
    autoconfigure = true
    
    }*/

dependencies {

	implementation group: 'org.seleniumhq.selenium', name: 'selenium-java', version: '4.4.0'

    testImplementation 'org.testng:testng:7.6.1'
    
    implementation 'io.github.bonigarcia:webdrivermanager:5.0.3'

    implementation group: 'com.aventstack', name: 'extentreports', version: '5.0.9'

    implementation group: 'io.qameta.allure', name: 'allure-testng', version: '2.19.0'

    implementation group: 'org.apache.poi', name: 'poi', version: '5.2.2'

    implementation group: 'org.apache.poi', name: 'poi-ooxml', version: '5.2.2'


}

test{
    useTestNG(){
        systemProperties project.properties.subMap("env")

       if( project.hasProperty("qa")) {
           environment("env", "qa")
       } else if( project.hasProperty("dev")){
           environment("env", "dev")
       } else if (project.hasProperty("staging")||project.hasProperty("")){
           environment("env", "staging")
       }


        if (project.hasProperty("smoke")) {
            suites './src/test/resources/runner/testngSmoke.xml'
        } else
        if (project.hasProperty("regression")) {
           suites './src/test/resources/runner/testngRegressionTests.xml'
        }
        else {
            suites './src/test/resources/runner/testngMiscTests.xml'
        }
    }

}
